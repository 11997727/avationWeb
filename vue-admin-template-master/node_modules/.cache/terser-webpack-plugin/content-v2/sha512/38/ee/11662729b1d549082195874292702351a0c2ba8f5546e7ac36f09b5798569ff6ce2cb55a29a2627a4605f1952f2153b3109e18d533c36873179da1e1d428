{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-0a7c83ea\"],{\"0a49\":function(e,t,r){var o=r(\"9b43\"),i=r(\"626a\"),a=r(\"4bf8\"),l=r(\"9def\"),n=r(\"cd1c\");e.exports=function(e,t){var r=1==e,s=2==e,u=3==e,d=4==e,c=6==e,m=5==e||c,p=t||n;return function(t,n,f){for(var v,y,h=a(t),g=i(h),F=o(n,f,3),b=l(g.length),_=0,$=r?p(t,b):s?p(t,0):void 0;b>_;_++)if((m||_ in g)&&(v=g[_],y=F(v,_,h),e))if(r)$[_]=y;else if(y)switch(e){case 3:return!0;case 5:return v;case 6:return _;case 2:$.push(v)}else if(d)return!1;return c?-1:u||d?d:$}}},\"20d6\":function(e,t,r){\"use strict\";var o=r(\"5ca1\"),i=r(\"0a49\")(6),a=\"findIndex\",l=!0;a in[]&&Array(1)[a]((function(){l=!1})),o(o.P+o.F*l,\"Array\",{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r(\"9c6c\")(a)},\"2e0e\":function(e,t,r){\"use strict\";var o=r(\"a9b6\"),i=r.n(o);i.a},\"69d1\":function(e,t,r){\"use strict\";var o=r(\"cf69\"),i=r.n(o);i.a},a9b6:function(e,t,r){},cd1c:function(e,t,r){var o=r(\"e853\");e.exports=function(e,t){return new(o(e))(t)}},cf69:function(e,t,r){},d0f3:function(e,t,r){\"use strict\";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"div\",{staticClass:\"custom-tree-container\"},[r(\"el-row\",{staticClass:\"demo-form-inline\",staticStyle:{\"margin-top\":\"30px\",\"margin-left\":\"30px\"},attrs:{gutter:20}},[r(\"el-col\",{attrs:{span:6}},[e._v(\"\\n      一级分类：\\n      \"),r(\"el-select\",{attrs:{placeholder:\"请选择一级分类\"},on:{change:e.isShow},model:{value:e.regulationsTypeId,callback:function(t){e.regulationsTypeId=t},expression:\"regulationsTypeId\"}},e._l(e.options,(function(e){return r(\"el-option\",{key:e.value,attrs:{label:e.regulationsTypeName,value:e.regulationsTypeId}})})),1)],1),e._v(\" \"),r(\"el-col\",{attrs:{span:6}},[e._v(\"\\n      二级分类：\\n      \"),r(\"el-select\",{attrs:{placeholder:\"请选择二级分类\"},on:{change:e.isShowfagui},model:{value:e.cid,callback:function(t){e.cid=t},expression:\"cid\"}},e._l(e.twoOptions,(function(e){return r(\"el-option\",{key:e.value,attrs:{label:e.cname,value:e.cid}})})),1)],1),e._v(\" \"),r(\"el-col\",{attrs:{span:6}},[e._v(\"\\n      法规：\\n      \"),r(\"el-select\",{attrs:{placeholder:\"请选择法规\"},on:{change:e.showTree},model:{value:e.regulationsId,callback:function(t){e.regulationsId=t},expression:\"regulationsId\"}},e._l(e.threeOptions,(function(e){return r(\"el-option\",{key:e.value,attrs:{label:e.regulationsName,value:e.regulationsId}})})),1)],1),e._v(\" \"),r(\"el-col\",{attrs:{span:6}},[r(\"el-button\",{attrs:{type:\"text\",disabled:e.flag},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v(\"新增一级目录\")])],1)],1),e._v(\" \"),r(\"div\",{staticClass:\"block\"},[r(\"el-tree\",{attrs:{data:e.data,\"show-checkbox\":\"\",\"node-key\":\"id\",\"default-expand-all\":\"\",\"expand-on-click-node\":!1},scopedSlots:e._u([{key:\"default\",fn:function(t){var o=t.node,i=t.data;return r(\"span\",{staticClass:\"custom-tree-node\"},[r(\"span\",[e._v(e._s(o.label))]),e._v(\" \"),r(\"span\",[e._v(e._s(i.lever))]),e._v(\" \"),r(\"span\",[r(\"el-button\",{attrs:{type:\"text\",size:\"mini\"},on:{click:function(){return e.append(o,i)}}},[e._v(\"\\n            添加\\n          \")]),e._v(\" \"),r(\"el-button\",{attrs:{type:\"text\",size:\"mini\"},on:{click:function(){return e.remove(o,i)}}},[e._v(\"\\n            删除\\n          \")]),e._v(\" \"),r(\"el-button\",{attrs:{type:\"text\",size:\"mini\"},on:{click:function(){return e.updateKeyChildren(i)}}},[e._v(\"\\n            修改\\n          \")])],1)])}}])}),e._v(\" \"),r(\"el-dialog\",{attrs:{title:\"新增一级目录\",visible:e.dialogFormVisible},on:{\"update:visible\":function(t){e.dialogFormVisible=t}}},[r(\"el-form\",{ref:\"ruleForm\",staticClass:\"demo-ruleForm\",attrs:{model:e.ruleForm,rules:e.rules,\"label-width\":\"100px\"}},[r(\"el-form-item\",{attrs:{label:\"目录名称\",prop:\"directoryNama\"}},[r(\"el-input\",{attrs:{autocomplete:\"off\"},model:{value:e.ruleForm.directoryNama,callback:function(t){e.$set(e.ruleForm,\"directoryNama\",t)},expression:\"ruleForm.directoryNama\"}})],1),e._v(\" \"),r(\"el-form-item\",{attrs:{label:\"目录排序\",prop:\"level\"}},[r(\"el-input\",{attrs:{type:\"number\"},model:{value:e.ruleForm.level,callback:function(t){e.$set(e.ruleForm,\"level\",e._n(t))},expression:\"ruleForm.level\"}})],1)],1),e._v(\" \"),r(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[r(\"el-button\",{on:{click:function(t){return e.quxiao(\"ruleForm\")}}},[e._v(\"取 消\")]),e._v(\" \"),r(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.submitForm(\"ruleForm\")}}},[e._v(\"确 定\")])],1)],1),e._v(\" \"),r(\"el-dialog\",{attrs:{title:\"新增子目录\",visible:e.dialogFormVisible2},on:{\"update:visible\":function(t){e.dialogFormVisible2=t}}},[r(\"el-form\",{ref:\"ruleForm2\",staticClass:\"demo-ruleForm\",attrs:{model:e.ruleForm2,rules:e.rules,\"label-width\":\"100px\"}},[r(\"el-form-item\",{attrs:{label:\"目录名称\",prop:\"directoryNama\"}},[r(\"el-input\",{attrs:{autocomplete:\"off\"},model:{value:e.ruleForm2.directoryNama,callback:function(t){e.$set(e.ruleForm2,\"directoryNama\",t)},expression:\"ruleForm2.directoryNama\"}})],1),e._v(\" \"),r(\"el-form-item\",{attrs:{label:\"目录排序\",prop:\"level\"}},[r(\"el-input\",{attrs:{type:\"number\"},model:{value:e.ruleForm2.level,callback:function(t){e.$set(e.ruleForm2,\"level\",e._n(t))},expression:\"ruleForm2.level\"}})],1)],1),e._v(\" \"),r(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[r(\"el-button\",{on:{click:function(t){return e.quxiao2(\"ruleForm2\")}}},[e._v(\"取 消\")]),e._v(\" \"),r(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.submitForm2(\"ruleForm2\")}}},[e._v(\"确 定\")])],1)],1),e._v(\" \"),r(\"el-dialog\",{attrs:{title:\"修改\",visible:e.dialogFormVisible3},on:{\"update:visible\":function(t){e.dialogFormVisible3=t}}},[r(\"el-form\",{ref:\"ruleForm3\",staticClass:\"demo-ruleForm\",attrs:{model:e.ruleForm3,rules:e.rules,\"label-width\":\"100px\"}},[r(\"el-form-item\",{attrs:{label:\"目录名称\",prop:\"directoryNama\"}},[r(\"el-input\",{attrs:{autocomplete:\"off\"},model:{value:e.ruleForm3.directoryNama,callback:function(t){e.$set(e.ruleForm3,\"directoryNama\",t)},expression:\"ruleForm3.directoryNama\"}})],1),e._v(\" \"),r(\"el-form-item\",{attrs:{label:\"目录排序\",prop:\"level\"}},[r(\"el-input\",{attrs:{type:\"number\"},model:{value:e.ruleForm3.level,callback:function(t){e.$set(e.ruleForm3,\"level\",e._n(t))},expression:\"ruleForm3.level\"}})],1)],1),e._v(\" \"),r(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[r(\"el-button\",{on:{click:function(t){return e.quxiao3(\"ruleForm3\")}}},[e._v(\"取 消\")]),e._v(\" \"),r(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.submitForm3(\"ruleForm3\")}}},[e._v(\"确 定\")])],1)],1)],1)],1)},i=[],a=(r(\"20d6\"),{data:function(){return{ruleForm:{level:\"\",directoryNama:\"\",regulationsForeignKey:\"\"},dialogFormVisible:!1,ruleForm2:{data:{},level:\"\",directoryNama:\"\",regulationsForeignKey:\"\",directoryKey:\"\",distance:\"\",parentId:\"\"},dialogFormVisible2:!1,ruleForm3:{level:\"\",directoryNama:\"\",directoryId:\"\"},dialogFormVisible3:!1,flag:!0,regulationsTypeId:\"\",cid:\"\",regulationsId:\"\",data:[],options:[],twoOptions:[],threeOptions:[],rules:{level:[{required:!0,message:\"请输入同级排序\",trigger:\"blur\"},{type:\"number\",message:\"请输入数字\",trigger:\"blur\"}],directoryNama:[{required:!0,message:\"请输入目录名称\"}]}}},mounted:function(){this.showOneType()},methods:{showOneType:function(){var e=this;this.$http.get(this.$url+\"regulationsTrype/showAllOneType\").then((function(t){\"2001\"==t.data.code?e.options=t.data.data:e.options=[]}))},isShow:function(){var e=this;this.flag=!0,this.twoOptions=[],this.threeOptions=[],this.data=[],this.cid=\"\",this.regulationsId=\"\",this.$http.get(this.$url+\"cassify/classifyList\",{params:{regulationsTypeId:this.regulationsTypeId}}).then((function(t){\"2001\"==t.data.code?e.twoOptions=t.data.data:e.twoOptions=[]}))},isShowfagui:function(){var e=this;this.threeOptions=[],this.data=[],this.regulationsId=\"\";var t=new URLSearchParams;t.append(\"cid\",this.cid),this.$http.post(this.$url+\"regulations/showRegulationsNameAndId\",t).then((function(t){\"2001\"==t.data.code?e.threeOptions=t.data.data:(e.threeOptions=[],e.flag=!0)}))},showTree:function(){this.getData()},submitForm:function(e){var t=this;this.$refs[e].validate((function(r){if(!r)return console.log(\"error submit!!\"),!1;t.dialogFormVisible=!1,t.ruleForm.regulationsForeignKey=t.regulationsId,t.$http.post(t.$url+\"directory/addOneDirectoryById\",t.ruleForm).then((function(r){\"2001\"==r.data.code?(t.$message({message:\"添加成功\",type:\"success\"}),t.quxiao(e),t.showTree()):t.$message.error(\"添加失败\")}))}))},quxiao:function(e){this.dialogFormVisible=!1,this.$refs[e].resetFields()},append:function(e,t){this.dialogFormVisible2=!0,this.ruleForm2.data=t},submitForm2:function(e){var t=this;this.$refs[e].validate((function(r){if(!r)return console.log(\"error submit!!\"),!1;t.ruleForm2.regulationsForeignKey=t.regulationsId,t.dialogFormVisible2=!1,console.log(\"这是父级目录\"),console.log(JSON.stringify(t.ruleForm2.data)),\"0\"==t.ruleForm2.data.pid?(console.log(\"是在一级目录下添加的\"),t.ruleForm2.directoryKey=t.ruleForm2.data.id+t.ruleForm2.data.directoryKey):t.ruleForm2.directoryKey=t.ruleForm2.data.directoryKey+t.ruleForm2.data.id+\"-\",t.ruleForm2.distance=parseInt(t.ruleForm2.data.distance)+1,t.ruleForm2.parentId=t.ruleForm2.data.id;var o=new URLSearchParams;o.append(\"directoryNama\",t.ruleForm2.directoryNama),o.append(\"parentId\",t.ruleForm2.parentId),o.append(\"directoryKey\",t.ruleForm2.directoryKey),o.append(\"distance\",t.ruleForm2.distance),o.append(\"level\",t.ruleForm2.level),o.append(\"regulationsForeignKey\",t.ruleForm2.regulationsForeignKey),t.$http.post(t.$url+\"directory/addZiDirectory\",o).then((function(r){if(\"2001\"==r.data.code){t.$message({message:\"添加成功\",type:\"success\"});var o={id:parseInt(r.data.data),label:t.ruleForm2.directoryNama,lever:t.ruleForm2.level,directoryKey:t.ruleForm2.directoryKey,distance:t.ruleForm2.distance,pid:t.ruleForm2.parentId,children:[]};t.ruleForm2.data.children||t.$set(t.ruleForm2.data,\"children\",[]),t.ruleForm2.data.children.push(o),console.log(JSON.stringify(o)),t.getData(),t.quxiao2(e)}else t.$message.error(\"添加失败\")}))}))},quxiao2:function(e){this.dialogFormVisible2=!1,this.$refs[e].resetFields(),this.ruleForm2.data={}},remove:function(e,t){var r=this,o=t.id,i=\"\";i=\"0\"==t.pid?t.id+t.directoryKey:t.directoryKey+t.id+\"-\",console.log(o),console.log(i);var a=new URLSearchParams;a.append(\"directoryId\",o),a.append(\"directoryKey\",i),this.$http.post(this.$url+\"directory/delDirectory\",a).then((function(o){if(\"2001\"==o.data.code){r.$message({message:\"删除成功\",type:\"success\"});var i=e.parent,a=i.data.children||i.data,l=a.findIndex((function(e){return e.id===t.id}));a.splice(l,1)}else r.$message.error(\"删除失败\")}))},updateKeyChildren:function(e){this.dialogFormVisible3=!0,this.ruleForm3.directoryId=e.id,this.ruleForm3.directoryNama=e.label,this.ruleForm3.level=e.lever},submitForm3:function(e){var t=this;this.$refs[e].validate((function(r){if(!r)return console.log(\"error submit!!\"),!1;t.dialogFormVisible3=!1,t.$http.post(t.$url+\"directory/updateDirectoryById\",t.ruleForm3).then((function(r){\"2001\"==r.data.code?(t.$message({message:\"修改成功\",type:\"success\"}),t.quxiao3(e),t.getData()):t.$message.error(\"修改失败\")}))}))},quxiao3:function(e){this.dialogFormVisible3=!1,this.$refs[e].resetFields()},getData:function(){var e=this,t=new URLSearchParams;t.append(\"directoryId\",this.regulationsId),this.$http.post(this.$url+\"directory/selectDirectoryById2\",t).then((function(t){\"2001\"==t.data.code?(console.log(JSON.stringify(t.data.data)),e.data=t.data.data,e.flag=!1):(e.data=[],e.flag=!1)}))}}}),l=a,n=(r(\"69d1\"),r(\"2e0e\"),r(\"2877\")),s=Object(n[\"a\"])(l,o,i,!1,null,null,null);t[\"default\"]=s.exports},e853:function(e,t,r){var o=r(\"d3f4\"),i=r(\"1169\"),a=r(\"2b4c\")(\"species\");e.exports=function(e){var t;return i(e)&&(t=e.constructor,\"function\"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),o(t)&&(t=t[a],null===t&&(t=void 0))),void 0===t?Array:t}}}]);","extractedComments":[]}