{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-3d7705b4\"],{\"44e0\":function(e,t,r){\"use strict\";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"el-form\",{ref:\"ruleForm\",staticClass:\"demo-ruleForm\",staticStyle:{width:\"1200px\",\"margin-top\":\"30px\"},attrs:{model:e.ruleForm,rules:e.rules,\"label-width\":\"200px\"}},[r(\"el-row\",[r(\"el-col\",{attrs:{span:12}},[r(\"el-form-item\",{attrs:{label:\"一级分类\",prop:\"regulationsTypeId\"}},[r(\"el-select\",{attrs:{placeholder:\"请选择\"},on:{change:e.isShow},model:{value:e.ruleForm.regulationsTypeId,callback:function(t){e.$set(e.ruleForm,\"regulationsTypeId\",t)},expression:\"ruleForm.regulationsTypeId\"}},e._l(e.options,(function(e){return r(\"el-option\",{key:e.value,attrs:{label:e.regulationsTypeName,value:e.regulationsTypeId}})})),1)],1)],1),e._v(\" \"),r(\"el-col\",{attrs:{span:12}},[e.ifshow?r(\"el-form-item\",{attrs:{label:\"二级分类\",prop:\"cid\"}},[r(\"el-select\",{attrs:{placeholder:\"请选择\"},model:{value:e.ruleForm.cid,callback:function(t){e.$set(e.ruleForm,\"cid\",t)},expression:\"ruleForm.cid\"}},e._l(e.twoOptions,(function(e){return r(\"el-option\",{key:e.value,attrs:{label:e.cname,value:e.cid}})})),1)],1):e._e()],1)],1),e._v(\" \"),r(\"el-form-item\",{attrs:{label:\"法规部号\",prop:\"regulationsPartNo\"}},[r(\"el-input\",{attrs:{type:\"number\"},model:{value:e.ruleForm.regulationsPartNo,callback:function(t){e.$set(e.ruleForm,\"regulationsPartNo\",e._n(t))},expression:\"ruleForm.regulationsPartNo\"}})],1),e._v(\" \"),r(\"el-form-item\",{attrs:{label:\"部号别名\",prop:\"regulationsPartNoAlias\"}},[r(\"el-input\",{model:{value:e.ruleForm.regulationsPartNoAlias,callback:function(t){e.$set(e.ruleForm,\"regulationsPartNoAlias\",t)},expression:\"ruleForm.regulationsPartNoAlias\"}})],1),e._v(\" \"),r(\"el-form-item\",{attrs:{label:\"版本号\",prop:\"regulationsVersion\"}},[r(\"el-input\",{model:{value:e.ruleForm.regulationsVersion,callback:function(t){e.$set(e.ruleForm,\"regulationsVersion\",t)},expression:\"ruleForm.regulationsVersion\"}})],1),e._v(\" \"),r(\"el-form-item\",{attrs:{label:\"法规名称\",prop:\"regulationsName\"}},[r(\"el-input\",{model:{value:e.ruleForm.regulationsName,callback:function(t){e.$set(e.ruleForm,\"regulationsName\",t)},expression:\"ruleForm.regulationsName\"}})],1),e._v(\" \"),r(\"el-form-item\",{attrs:{label:\"是否显示\",prop:\"regulationsShowStatus\"}},[r(\"el-radio-group\",{model:{value:e.ruleForm.regulationsShowStatus,callback:function(t){e.$set(e.ruleForm,\"regulationsShowStatus\",t)},expression:\"ruleForm.regulationsShowStatus\"}},[r(\"el-radio\",{attrs:{label:\"1\"}},[e._v(\"是\")]),e._v(\" \"),r(\"el-radio\",{attrs:{label:\"2\"}},[e._v(\"否\")])],1)],1),e._v(\" \"),r(\"el-form-item\",{attrs:{label:\"法规图标\"}},[r(\"el-upload\",{attrs:{action:\"\",\"list-type\":\"picture-card\",\"auto-upload\":!1,limit:1,\"on-change\":e.handleChange,\"before-upload\":e.beforeAvatarUpload,\"on-remove\":e.handleRemove}},[r(\"i\",{staticClass:\"el-icon-plus\"})]),e._v(\" \"),r(\"el-dialog\",{attrs:{visible:e.dialogVisible},on:{\"update:visible\":function(t){e.dialogVisible=t}}},[e._v('\\n      < img width=\"100%\" :src=\"ruleForm.regulationsIconPath\" alt=\"\">\\n    ')])],1),e._v(\" \"),r(\"el-form-item\",{attrs:{label:\"PDF名称\",prop:\"regulationsPdfName\"}},[r(\"el-input\",{model:{value:e.ruleForm.regulationsPdfName,callback:function(t){e.$set(e.ruleForm,\"regulationsPdfName\",t)},expression:\"ruleForm.regulationsPdfName\"}})],1),e._v(\" \"),r(\"el-form-item\",{attrs:{label:\"PDF文件上传\"}},[r(\"el-upload\",{ref:\"upload\",staticClass:\"upload-demo\",attrs:{action:\"http://localhost:8080/regulations/doUpload\",\"on-preview\":e.handlePreviewPDF,\"on-remove\":e.handleRemovePDF,\"on-success\":e.uploadSuccess,\"before-upload\":e.beforeAvatarUploadPDF,\"auto-upload\":!1,limit:1}},[r(\"el-button\",{attrs:{slot:\"trigger\",size:\"small\",type:\"primary\"},slot:\"trigger\"},[e._v(\"选取文件\")]),e._v(\" \"),r(\"el-button\",{staticStyle:{\"margin-left\":\"10px\"},attrs:{size:\"small\",type:\"success\"},on:{click:e.submitUpload}},[e._v(\"上传到服务器\")]),e._v(\" \"),r(\"div\",{staticClass:\"el-upload__tip\",attrs:{slot:\"tip\"},slot:\"tip\"},[e._v(\"只能上传pdf文件,最大支持120MB\")])],1)],1),e._v(\" \"),r(\"el-form-item\",{attrs:{label:\"*法规版本说明\",prop:\"regulationsVersionExplain\"}},[r(\"tinymce-editor\",{ref:\"editor\",attrs:{disabled:e.disabled},on:{onClick:e.onClick},model:{value:e.ruleForm.regulationsVersionExplain,callback:function(t){e.$set(e.ruleForm,\"regulationsVersionExplain\",t)},expression:\"ruleForm.regulationsVersionExplain\"}})],1),e._v(\" \"),r(\"el-form-item\",[r(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.submitForm(\"ruleForm\")}}},[e._v(\"立即创建\")]),e._v(\" \"),r(\"el-button\",{on:{click:function(t){return e.resetForm(\"ruleForm\")}}},[e._v(\"重置\")]),e._v(\" \"),r(\"el-button\",{on:{click:function(t){return e.getBack()}}},[e._v(\"返回\")])],1)],1)},a=[],l=(r(\"7f7f\"),r(\"cc44\")),s={components:{TinymceEditor:l[\"a\"]},data:function(){return{dialogVisible:!1,disabled:!1,ifshow:!1,options:[],twoOptions:[],isAdd:!0,ruleForm:{cid:\"\",regulationsTypeId:\"\",regulationsIconPath:\"\",regulationsPartNo:\"\",regulationsPartNoAlias:\"\",regulationsVersion:\"\",regulationsName:\"\",regulationsShowStatus:\"\",regulationsPdfName:\"\",regulationsPdfPath:\"\",regulationsVersionExplain:\"\",key:\"\"},rules:{regulationsPartNo:[{required:!0,message:\"请输入法规部号\",trigger:\"blur\"},{type:\"number\",message:\"请输入数字\",trigger:\"blur\"}],regulationsPartNoAlias:[{required:!0,message:\"请输入法规部号别名\",trigger:\"blur\"}],regulationsVersion:[{required:!0,message:\"请输入法规版本号\",trigger:\"blur\"}],regulationsName:[{required:!0,message:\"请输入法规名称\",trigger:\"blur\"}],regulationsShowStatus:[{required:!0,message:\"是否前台显示\",trigger:\"change\"}],regulationsPdfName:[{required:!0,message:\"请输入法规PDF名称\",trigger:\"blur\"}],msg:[{required:!0,message:\"请输入信息\"}],regulationsTypeId:[{required:!0,message:\"请选择一级分类\",trigger:\"change\"}],cid:[{required:!0,message:\"请选择二级分类\",trigger:\"change\"}]}}},created:function(){this.showOneType()},methods:{showOneType:function(){var e=this;this.$http.get(this.$url+\"regulationsTrype/showAllOneType\").then((function(t){\"2001\"==t.data.code?e.options=t.data.data:e.options=[]}))},isShow:function(){var e=this;this.ruleForm.cid=\"\",this.twoOptions=[],this.ifshow=!0,this.$http.get(this.$url+\"cassify/classifyList\",{params:{regulationsTypeId:this.ruleForm.regulationsTypeId}}).then((function(t){\"2001\"==t.data.code?e.twoOptions=t.data.data:e.twoOptions=[]}))},handleRemove:function(e,t){console.log(e,t),this.ruleForm.regulationsIconPath=\"\"},handleChange:function(e,t){var r=this;this.getBase64(e.raw).then((function(e){r.ruleForm.regulationsIconPath=e}))},getBase64:function(e){return new Promise((function(t,r){var o=new FileReader,a=\"\";o.readAsDataURL(e),o.onload=function(){a=o.result},o.onerror=function(e){r(e)},o.onloadend=function(){t(a)}}))},submitUpload:function(){this.$refs.upload.submit()},handleRemovePDF:function(e,t){var r=this;this.isAdd=!0,console.log(e,t),\"\"!=this.ruleForm.regulationsPdfPath&&\"\"!=this.ruleForm.key&&this.$http.get(this.$url+\"regulations/delFile\",{params:{key:this.ruleForm.key}}).then((function(e){\"2001\"==e.data.code?(r.$message({message:\"文件删除成功\",type:\"success\"}),r.ruleForm.regulationsPdfPath=\"\",r.ruleForm.key=\"\"):\"2004\"==e.data.code&&r.$message.error(\"文件删除失败\")}))},handlePreviewPDF:function(e){console.log(e)},beforeAvatarUploadPDF:function(e){var t=e.name,r=t.lastIndexOf(\".\"),o=t.substring(r,t.length);if(\".pdf\"!==o.toLowerCase())return this.$message.error(\"请上传.pdf文件\"),!1;this.isAdd=!1},uploadSuccess:function(e,t,r){this.isAdd=!0,\"2001\"==e.code?(this.ruleForm.regulationsPdfPath=e.url,this.ruleForm.key=e.key,this.$message({message:\"文件上传成功\",type:\"success\"}),console.log(\"key\"+this.ruleForm.key),console.log(\"path\"+this.ruleForm.regulationsPdfPath)):this.$message.error(\"文件上传失败\")},beforeAvatarUpload:function(e){var t=\"image/jpeg\"===e.type,r=e.size/1024/1024<2;return t||this.$message.error(\"上传头像图片只能是 JPG 格式!\"),r||this.$message.error(\"上传头像图片大小不能超过 2MB!\"),t&&r},submitForm:function(e){var t=this;this.isAdd?this.$refs[e].validate((function(r){if(!r)return console.log(\"error submit!!\"),!1;var o=t;console.log(JSON.stringify(o.ruleForm)),t.$http.post(t.$url+\"regulations/addRegulations\",o.ruleForm).then((function(r){\"2001\"==r.data.code?(t.$message({message:\"添加成功\",type:\"success\"}),t.resetForm(e),t.ruleForm.regulationsPdfPath=\"\",t.ruleForm.key=\"\"):t.$message.error(\"添加失败\")}))})):this.$message.error(\"文件正在上传请稍后。。。\")},resetForm:function(e){this.$refs[e].resetFields(),this.$refs.editor.clear(),this.ifshow=!1},onClick:function(e,t){console.log(\"Element clicked\"),console.log(e),console.log(t)},getContent:function(){alert(this.$refs.editor.getContent())},setContent:function(e){this.$refs.editor.setContent(e)},getBack:function(){this.$router.push({name:\"RegulationsList\"})}}},i=s,n=r(\"2877\"),u=Object(n[\"a\"])(i,o,a,!1,null,null,null);t[\"default\"]=u.exports},cc44:function(e,t,r){\"use strict\";var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"div\",{staticClass:\"tinymce-editor\"},[r(\"editor\",{attrs:{init:e.init,disabled:e.disabled},on:{onClick:e.onClick},model:{value:e.myValue,callback:function(t){e.myValue=t},expression:\"myValue\"}})],1)},a=[],l=r(\"e562\"),s=r.n(l),i=r(\"ca72\"),n=(r(\"0d68\"),r(\"4ea8\"),r(\"3aea\"),r(\"07d1\"),r(\"84ec\"),r(\"9434\"),r(\"3154\"),r(\"4bd0\"),r(\"bc54\"),r(\"9a44\"),{components:{Editor:i[\"a\"]},props:{value:{type:String,default:\"\"},baseUrl:{type:String,default:\"\"},disabled:{type:Boolean,default:!1},plugins:{type:[String,Array],default:\"lists image media table wordcount fullscreen insertdatetime paste mathjax\"},toolbar:{type:[String,Array],default:\"undo redo |  formatselect | bold italic forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | lists image media table | removeformat | fullscreen | insertdatetime | paste | mathjax\"}},data:function(){return{init:{language_url:\"\".concat(this.baseUrl,\"/tinymce/langs/zh_CN.js\"),language:\"zh_CN\",skin_url:\"\".concat(this.baseUrl,\"/tinymce/skins/ui/oxide\"),content_css:\"\".concat(this.baseUrl,\"/tinymce/skins/content/default/content.css\"),paste_data_images:!0,height:300,plugins:this.plugins,toolbar:this.toolbar,branding:!1,menubar:!1,mathjax:{lib:\"/mathjax/es5/tex-mml-chtml.js\"},images_upload_handler:function(e,t,r){var o=\"data:image/jpeg;base64,\"+e.base64();t(o)}},myValue:this.value}},watch:{value:function(e){this.myValue=e},myValue:function(e){this.$emit(\"input\",e)}},mounted:function(){s.a.init({})},methods:{onClick:function(e){this.$emit(\"onClick\",e,s.a)},clear:function(){this.myValue=\"\"},getContent:function(){return tinyMCE.activeEditor.getContent()},setContent:function(e){return tinyMCE.activeEditor.setContent(e)}}}),u=n,c=r(\"2877\"),m=Object(c[\"a\"])(u,o,a,!1,null,null,null);t[\"a\"]=m.exports}}]);","extractedComments":[]}