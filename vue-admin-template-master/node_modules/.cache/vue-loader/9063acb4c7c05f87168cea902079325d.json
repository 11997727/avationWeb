{"remainingRequest":"E:\\vue-cli\\vue-admin-template-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\vue-cli\\vue-admin-template-master\\src\\views\\addClause\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\vue-cli\\vue-admin-template-master\\src\\views\\addClause\\index.vue","mtime":1582552428932},{"path":"E:\\vue-cli\\vue-admin-template-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue-cli\\vue-admin-template-master\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\vue-cli\\vue-admin-template-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue-cli\\vue-admin-template-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport TinymceEditor from '../addRegulations/TinymceEditor'\nexport default {\n  components: {\n    TinymceEditor\n  },\n  data() {\n    return {\n      // dialogImageUrl: '',\n      // dialogVisible: false,\n      disabled: false,\n      regulationsList: [],\n      valueId: [], // 联动选择框的id主键\n      ruleForm: {\n        regulationsId: '',\n        clauseNo: '',\n        clauseNoAlias: '',\n        clauseVersion: '',\n        clauseTitle: '',\n        clauseContent: '',\n        clauseAntistop: '',\n        directoryForeignKey: ''\n      },\n      rules: {\n        regulationsId: [\n          { required: true, message: '请选择法规', trigger: 'change' }\n        ],\n        directoryForeignKey: [\n          { required: true, message: '请选择法规目录', trigger: 'change' }\n        ],\n        clauseNo: [\n          { required: true, message: '请输入条款编号', trigger: 'blur' },\n          { type: 'number', message: '请输入数字', trigger: 'blur' }\n        ],\n        clauseNoAlias: [\n          { required: true, message: '请输入条款编号别名', trigger: 'blur' }\n        ],\n        clauseVersion: [\n          { required: true, message: '请输入条款版本号', trigger: 'blur' }\n        ],\n        clauseTitle: [\n          { required: true, message: '请输入条款标题', trigger: 'blur' }\n        ],\n        clauseContent: [\n          { required: true, message: '请输入条款内容' }\n        ],\n        clauseAntistop: [\n          { required: true, message: '请输入关键词', trigger: 'blur' }\n        ]\n      },\n      options: []\n    }\n  },\n  created() {\n    // 初始化一级分类下拉\n    this.getRegulations()\n    // this.setContent()\n    // this.$refs.editor.setContent(\"22222\")\n  },\n  methods: {\n    getRegulations() {\n      this.$http.post(this.$url + 'regulations/showAll').then((res) => {\n        if (res.data.code == '2001') {\n          this.regulationsList = res.data.data\n        } else {\n          this.regulationsList = []\n        }\n      })\n    },\n    onChange() {\n      const params = new URLSearchParams()\n      params.append('directoryId', this.ruleForm.regulationsId)\n      this.$http.post(this.$url + 'directory/selectDirectoryById2', params).then((res) => {\n        if (res.data.code == '2001') {\n          this.options = res.data.data\n        } else {\n          this.options = []\n        }\n      })\n    },\n    onHandleChange() {\n      // console.log(JSON.stringify(this.valueId))\n      if (this.valueId.length === 1) {\n        this.ruleForm.directoryForeignKey = this.valueId[0]\n      } else {\n        this.ruleForm.directoryForeignKey = this.valueId[this.valueId.length - 1]\n      }\n    },\n    // 表单的提交\n    submitForm(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          var _this = this\n          // console.log(JSON.stringify(_this.ruleForm))\n          this.$http.post(this.$url + 'clause/addClause', _this.ruleForm).then((res) => {\n            if (res.data.code == '2001') {\n              this.$message({\n                message: '添加成功',\n                type: 'success'\n              })\n              // this.resetForm(formName)\n            } else {\n              this.$message.error('添加失败')\n            }\n          })\n        } else {\n          console.log('error submit!!')\n          return false\n        }\n      })\n    },\n    // 清空表单以及富文本编译器内容\n    // resetForm(formName) {\n    //   this.$refs[formName].resetFields()\n    //   this.$refs.editor.clear()\n    //   this.valueId=[]\n    //   this.options = []\n    // },\n    // 文本编译器点击事件\n    onClick(e, editor) {\n      // console.log('Element clicked')\n      // console.log(e)\n      // console.log(editor)\n    },\n    // 获取文本编译器的HTML内容\n    getContent() {\n      // alert(this.$refs.editor.getContent())\n    },\n    // 设置文本编译器的HTML内容\n    setContent(msg) {\n      this.$refs.editor.setContent(msg)\n    },\n    getBack() {\n      this.$router.push({\n        path: '/example/clauseList'\n      })\n    }\n\n  }\n}\n",null]}